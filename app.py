cd /mount/src/cantata-tour-2025 && \
cat > app.py << 'EOF'
import streamlit as st
import pandas as pd
from datetime import datetime, timedelta
import folium
from streamlit_folium import folium_static
import math

# =============================================
# 1. ë‹¤êµ­ì–´ ì‚¬ì „ (ì˜ì–´ / í•œêµ­ì–´ / íŒë””ì–´)
# =============================================
LANG = {
    "en": {
        "title": "ğŸ¼ Cantata Tour <span style='font-size:1.1rem; color:#888; font-weight:normal;'>(Maharashtra)</span>",
        "start_city": "Starting City",
        "start_btn": "ğŸš€ Start",
        "reset_btn": "ğŸ”„ Reset All",
        "next_city": "Next City",
        "add_btn": "â• Add",
        "current_route": "### Current Route",
        "total_distance": "Total Distance",
        "total_time": "Total Time",
        "venues_dates": "Venues & Dates",
        "performance_date": "Performance Date",
        "venue_name": "Venue Name",
        "seats": "Seats",
        "indoor_outdoor": "Indoor/Outdoor",
        "indoor": "Indoor",
        "outdoor": "Outdoor",
        "google_link": "Google Maps Link",
        "register": "Register",
        "add_venue": "Add Venue",
        "edit": "Edit",
        "open_maps": "Open in Google Maps",
        "save": "Save",
        "delete": "Delete",
        "tour_map": "Tour Map",
        "caption": "Mobile: â‹® â†’ 'Add to Home Screen' â†’ Use like an app!",
        "date_format": "%b %d, %Y",  # Jan 01, 2025
        "admin_mode": "Admin Mode",
        "password": "Password",
        "enter_password": "Enter password to access Admin Mode",
        "submit": "Submit",
    },
    "ko": {
        "title": "ğŸ¼ ì¹¸íƒ€íƒ€ íˆ¬ì–´ <span style='font-size:1.1rem; color:#888; font-weight:normal;'>(ë§ˆí•˜ë¼ìŠˆíŠ¸ë¼)</span>",
        "start_city": "ì¶œë°œ ë„ì‹œ",
        "start_btn": "ğŸš€ ì‹œì‘",
        "reset_btn": "ğŸ”„ ì „ì²´ ì´ˆê¸°í™”",
        "next_city": "ë‹¤ìŒ ë„ì‹œ",
        "add_btn": "â• ì¶”ê°€",
        "current_route": "### í˜„ì¬ ê²½ë¡œ",
        "total_distance": "ì´ ê±°ë¦¬",
        "total_time": "ì´ ì†Œìš”ì‹œê°„",
        "venues_dates": "ê³µì—°ì¥ & ë‚ ì§œ",
        "performance_date": "ê³µì—° ë‚ ì§œ",
        "venue_name": "ê³µì—°ì¥ ì´ë¦„",
        "seats": "ì¢Œì„ ìˆ˜",
        "indoor_outdoor": "ì‹¤ë‚´/ì‹¤ì™¸",
        "indoor": "ì‹¤ë‚´",
        "outdoor": "ì‹¤ì™¸",
        "google_link": "êµ¬ê¸€ ì§€ë„ ë§í¬",
        "register": "ë“±ë¡",
        "add_venue": "ê³µì—°ì¥ ì¶”ê°€",
        "edit": "í¸ì§‘",
        "open_maps": "êµ¬ê¸€ ì§€ë„ ì—´ê¸°",
        "save": "ì €ì¥",
        "delete": "ì‚­ì œ",
        "tour_map": "íˆ¬ì–´ ì§€ë„",
        "caption": "ëª¨ë°”ì¼: â‹® â†’ 'í™ˆ í™”ë©´ì— ì¶”ê°€' â†’ ì•±ì²˜ëŸ¼ ì‚¬ìš©!",
        "date_format": "%Yë…„ %mì›” %dì¼",  # 2025ë…„ 01ì›” 01ì¼
        "admin_mode": "ê´€ë¦¬ì ëª¨ë“œ",
        "password": "ë¹„ë°€ë²ˆí˜¸",
        "enter_password": "ê´€ë¦¬ì ëª¨ë“œ ì ‘ê·¼ì„ ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥",
        "submit": "ì œì¶œ",
    },
    "hi": {
        "title": "ğŸ¼ à¤•à¤¾à¤‚à¤¤à¤¾à¤¤à¤¾ à¤Ÿà¥‚à¤° <span style='font-size:1.1rem; color:#888; font-weight:normal;'>(à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤°)</span>",
        "start_city": "à¤ªà¥à¤°à¤¾à¤°à¤‚à¤­à¤¿à¤• à¤¶à¤¹à¤°",
        "start_btn": "ğŸš€ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",
        "reset_btn": "ğŸ”„ à¤¸à¤¬ à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
        "next_city": "à¤…à¤—à¤²à¤¾ à¤¶à¤¹à¤°",
        "add_btn": "â• à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",
        "current_route": "### à¤µà¤°à¥à¤¤à¤®à¤¾à¤¨ à¤®à¤¾à¤°à¥à¤—",
        "total_distance": "à¤•à¥à¤² à¤¦à¥‚à¤°à¥€",
        "total_time": "à¤•à¥à¤² à¤¸à¤®à¤¯",
        "venues_dates": "à¤¸à¥à¤¥à¤² à¤”à¤° à¤¤à¤¿à¤¥à¤¿à¤¯à¤¾à¤",
        "performance_date": "à¤ªà¥à¤°à¤¦à¤°à¥à¤¶à¤¨ à¤¤à¤¿à¤¥à¤¿",
        "venue_name": "à¤¸à¥à¤¥à¤² à¤•à¤¾ à¤¨à¤¾à¤®",
        "seats": "à¤¸à¥€à¤Ÿà¥‡à¤‚",
        "indoor_outdoor": "à¤‡à¤‚à¤¡à¥‹à¤°/à¤†à¤‰à¤Ÿà¤¡à¥‹à¤°",
        "indoor": "à¤‡à¤‚à¤¡à¥‹à¤°",
        "outdoor": "à¤†à¤‰à¤Ÿà¤¡à¥‹à¤°",
        "google_link": "à¤—à¥‚à¤—à¤² à¤®à¥ˆà¤ªà¥à¤¸ à¤²à¤¿à¤‚à¤•",
        "register": "à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤°",
        "add_venue": "à¤¸à¥à¤¥à¤² à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",
        "edit": "à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¥‡à¤‚",
        "open_maps": "à¤—à¥‚à¤—à¤² à¤®à¥ˆà¤ªà¥à¤¸ à¤®à¥‡à¤‚ à¤–à¥‹à¤²à¥‡à¤‚",
        "save": "à¤¸à¤¹à¥‡à¤œà¥‡à¤‚",
        "delete": "à¤¹à¤Ÿà¤¾à¤à¤",
        "tour_map": "à¤Ÿà¥‚à¤° à¤®à¥ˆà¤ª",
        "caption": "à¤®à¥‹à¤¬à¤¾à¤‡à¤²: â‹® â†’ 'à¤¹à¥‹à¤® à¤¸à¥à¤•à¥à¤°à¥€à¤¨ à¤ªà¤° à¤œà¥‹à¤¡à¤¼à¥‡à¤‚' â†’ à¤à¤ª à¤•à¥€ à¤¤à¤°à¤¹ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚!",
        "date_format": "%d %b %Y",  # 01 à¤œà¤¨à¤µà¤°à¥€ 2025
        "admin_mode": "à¤à¤¡à¤®à¤¿à¤¨ à¤®à¥‹à¤¡",
        "password": "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡",
        "enter_password": "à¤à¤¡à¤®à¤¿à¤¨ à¤®à¥‹à¤¡ à¤à¤•à¥à¤¸à¥‡à¤¸ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
        "submit": "à¤œà¤®à¤¾ à¤•à¤°à¥‡à¤‚",
    },
}

# =============================================
# 2. í˜ì´ì§€ ì„¤ì • + ì‚¬ì´ë“œë°”
# =============================================
st.set_page_config(page_title="Cantata Tour", layout="wide", initial_sidebar_state="collapsed")

with st.sidebar:
    st.markdown("### ğŸŒ Language")
    lang = st.radio("Select", ["en", "ko", "hi"], format_func=lambda x: {"en": "English", "ko": "í•œêµ­ì–´", "hi": "à¤¹à¤¿à¤¨à¥à¤¦à¥€"}[x], horizontal=True)
    _ = LANG[lang]

    st.markdown("---")
    st.markdown("### ğŸ”’ Admin")
    if 'admin' not in st.session_state:
        st.session_state.admin = False
    if 'show_pw' not in st.session_state:
        st.session_state.show_pw = False

    if st.session_state.admin:
        st.success("Admin Mode Active")
    else:
        if st.button(_["admin_mode"]):
            st.session_state.show_pw = True
        if st.session_state.show_pw:
            pw = st.text_input(_["enter_password"], type="password")
            if st.button(_["submit"]):
                if pw == "0691":
                    st.session_state.admin = True
                    st.session_state.show_pw = False
                    st.success("Activated!")
                    st.rerun()
                else:
                    st.error("Incorrect")

    st.markdown("---")
    if st.button(_["reset_btn"]):
        for key in list(st.session_state.keys()):
            del st.session_state[key]
        st.rerun()

# =============================================
# 3. ì„¸ì…˜ ì´ˆê¸°í™”
# =============================================
if 'route' not in st.session_state:
    st.session_state.route = []
if 'dates' not in st.session_state:
    st.session_state.dates = {}
if 'distances' not in st.session_state:
    st.session_state.distances = {}
if 'venues' not in st.session_state:
    st.session_state.venues = {}
if 'admin_venues' not in st.session_state:
    st.session_state.admin_venues = {}
if 'start_city' not in st.session_state:
    st.session_state.start_city = 'Mumbai'
if 'edit_modes' not in st.session_state:
    st.session_state.edit_modes = {}
if 'add_modes' not in st.session_state:
    st.session_state.add_modes = {}
if 'next_city_select' not in st.session_state:
    st.session_state.next_city_select = None

# =============================================
# 4. ë„ì‹œ ëª©ë¡ ë° ì¢Œí‘œ
# =============================================
cities = sorted([
    'Mumbai', 'Pune', 'Nagpur', 'Nashik', 'Thane', 'Aurangabad', 'Solapur', 'Amravati', 'Nanded', 'Kolhapur',
    'Akola', 'Latur', 'Ahmadnagar', 'Jalgaon', 'Dhule', 'Ichalkaranji', 'Malegaon', 'Bhusawal', 'Bhiwandi', 'Bhandara',
    'Beed', 'Buldana', 'Chandrapur', 'Dharashiv', 'Gondia', 'Hingoli', 'Jalna', 'Mira-Bhayandar', 'Nandurbar', 'Osmanabad',
    'Palghar', 'Parbhani', 'Ratnagiri', 'Sangli', 'Satara', 'Sindhudurg', 'Wardha', 'Washim', 'Yavatmal', 'Kalyan-Dombivli',
    'Ulhasnagar', 'Vasai-Virar', 'Sangli-Miraj-Kupwad', 'Nanded-Waghala', 'Bandra (Mumbai)', 'Colaba (Mumbai)', 'Andheri (Mumbai)',
    'Boric Nagar (Mumbai)', 'Navi Mumbai', 'Mumbai Suburban', 'Pimpri-Chinchwad (Pune)', 'Koregaon Park (Pune)', 'Kothrud (Pune)',
    'Hadapsar (Pune)', 'Pune Cantonment', 'Nashik Road', 'Deolali (Nashik)', 'Satpur (Nashik)', 'Aurangabad City', 'Jalgaon City',
    'Bhopalwadi (Aurangabad)', 'Nagpur City', 'Sitabuldi (Nagpur)', 'Jaripatka (Nagpur)', 'Solapur City', 'Hotgi (Solapur)',
    'Pandharpur (Solapur)', 'Amravati City', 'Badnera (Amravati)', 'Paratwada (Amravati)', 'Akola City', 'Murtizapur (Akola)',
    'Washim City', 'Mangrulpir (Washim)', 'Yavatmal City', 'Pusad (Yavatmal)', 'Darwha (Yavatmal)', 'Wardha City',
    'Sindi (Wardha)', 'Hinganghat (Wardha)', 'Chandrapur City', 'Brahmapuri (Chandrapur)', 'Mul (Chandrapur)', 'Gadchiroli',
    'Aheri (Gadchiroli)', 'Dhanora (Gadchiroli)', 'Gondia City', 'Tiroda (Gondia)', 'Arjuni Morgaon (Gondia)',
    'Bhandara City', 'Pauni (Bhandara)', 'Tumsar (Bhandara)', 'Nagbhid (Chandrapur)', 'Gadhinglaj (Kolhapur)',
    'Kagal (Kolhapur)', 'Ajra (Kolhapur)', 'Shiroli (Kolhapur)'
])

coords = {
    'Mumbai': (19.07, 72.88), 'Pune': (18.52, 73.86), 'Nagpur': (21.15, 79.08), 'Nashik': (20.00, 73.79),
    'Thane': (19.22, 72.98), 'Aurangabad': (19.88, 75.34), 'Solapur': (17.67, 75.91), 'Amravati': (20.93, 77.75),
    'Nanded': (19.16, 77.31), 'Kolhapur': (16.70, 74.24), 'Akola': (20.70, 77.00), 'Latur': (18.40, 76.57),
    'Ahmadnagar': (19.10, 74.75), 'Jalgaon': (21.00, 75.57), 'Dhule': (20.90, 74.77), 'Ichalkaranji': (16.69, 74.47),
    'Malegaon': (20.55, 74.53), 'Bhusawal': (21.05, 76.00), 'Bhiwandi': (19.30, 73.06), 'Bhandara': (21.17, 79.65),
    'Beed': (18.99, 75.76), 'Buldana': (20.54, 76.18), 'Chandrapur': (19.95, 79.30), 'Dharashiv': (18.40, 76.57),
    'Gondia': (21.46, 80.19), 'Hingoli': (19.72, 77.15), 'Jalna': (19.85, 75.89), 'Mira-Bhayandar': (19.28, 72.87),
    'Nandurbar': (21.37, 74.22), 'Osmanabad': (18.18, 76.07), 'Palghar': (19.70, 72.77), 'Parbhani': (19.27, 76.77),
    'Ratnagiri': (16.99, 73.31), 'Sangli': (16.85, 74.57), 'Satara': (17.68, 74.02), 'Sindhudurg': (16.24, 73.42),
    'Wardha': (20.75, 78.60), 'Washim': (20.11, 77.13), 'Yavatmal': (20.39
